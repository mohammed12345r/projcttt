<!DOCTYPE html>
<html lang="ar"> <!-- ØªØ­Ø¯ÙŠØ¯ Ù„ØºØ© Ø§Ù„ØµÙØ­Ø© Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© -->

<head>
    <meta charset="UTF-8"> <!-- ØªØ±Ù…ÙŠØ² Ø§Ù„Ø£Ø­Ø±Ù -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- Ø¯Ø¹Ù… Ø§Ù„Ø¹Ø±Ø¶ Ø¹Ù„Ù‰ Ø§Ù„Ø¬ÙˆØ§Ù„ -->
    <title>Ø­Ø§Ø³Ø¨Ø© Ù…Ø¤Ø´Ø± ÙƒØªÙ„Ø© Ø§Ù„Ø¬Ø³Ù… (BMI)</title>
    
    <style>
        /* ØªÙ†Ø³ÙŠÙ‚Ø§Øª Ø§Ù„ØµÙØ­Ø© */
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            padding: 20px;
            background-color: #fff;
            color: #000;
            transition: background-color 0.3s, color 0.3s;
        }

        body.dark-mode {
            background-color: #121212;
            color: #fff;
        }
        
        input, select {
            margin: 10px;
            padding: 10px;
            width: 200px;
            font-size: 16px;
        }

        button {
            padding: 10px 20px;
            margin: 10px;
            font-size: 16px;
            cursor: pointer;
            border-radius: 5px;
            border: none;
            background-color: #007bff;
            color: white;
        }

        button:hover {
            background-color: #0056b3;
        }
        
        #result, #fat-result, #advice {
            font-size: 24px;
            font-weight: bold;
        }
        
        #history {
            margin-top: 20px;
            text-align: left;
            width: 80%;
            margin-inline: auto;
        }

        canvas {
            margin-top: 20px;
        }

        .mobile-input {
            width: 100%;
        }

        /* ØªØµÙ…ÙŠÙ… Ù…ØªØ¬Ø§ÙˆØ¨ */
        @media (max-width: 600px) {
            input, select {
                width: 100%;
            }

            button {
                width: 100%;
            }

            #result, #fat-result, #advice {
                font-size: 18px;
            }
        }

    </style>
    
    <!-- Ù…ÙƒØªØ¨Ø© Chart.js Ù„Ù„Ø±Ø³Ù… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠ -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Ù…ÙƒØªØ¨Ø© i18next Ù„Ø¯Ø¹Ù… Ø§Ù„ØªØ±Ø¬Ù…Ø© -->
    <script src="https://cdn.jsdelivr.net/npm/i18next@21.6.3/i18next.min.js"></script>
</head>

<body>
    
    <!-- Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ØµÙØ­Ø© -->
    <h1 id="title">Ø­Ø§Ø³Ø¨Ø© Ù…Ø¤Ø´Ø± ÙƒØªÙ„Ø© Ø§Ù„Ø¬Ø³Ù… (BMI)</h1>
    
    <!-- Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„ÙˆØ²Ù† -->
    <label id="weightLabel" for="weight">Ø§Ù„ÙˆØ²Ù†:</label>
    <input type="number" id="weight" placeholder="Ø§Ù„ÙˆØ²Ù†" min="1" required class="mobile-input">
    
    <!-- Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø·ÙˆÙ„ -->
    <label id="heightLabel" for="height">Ø§Ù„Ø·ÙˆÙ„:</label>
    <input type="number" id="height" placeholder="Ø§Ù„Ø·ÙˆÙ„" min="1" required class="mobile-input">
    
    <!-- Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ÙˆØ­Ø¯Ø© (Ù…ØªØ±ÙŠ Ø£Ùˆ Ø¥Ù…Ø¨Ø±ÙŠØ§Ù„ÙŠ) -->
    <br>
    <label for="unit" id="unitLabel">ÙˆØ­Ø¯Ø§Øª Ø§Ù„Ù‚ÙŠØ§Ø³:</label>
    <select id="unit">
        <option value="metric">Ù…ØªØ± / ÙƒÙŠÙ„ÙˆØ¬Ø±Ø§Ù…</option>
        <option value="imperial">Ù‚Ø¯Ù… / Ø±Ø·Ù„</option>
    </select>
    
    <!-- Ø²Ø± Ø§Ù„Ø­Ø³Ø§Ø¨ -->
    <br><br>
    <button onclick="calculateBMI()">Ø­Ø³Ø§Ø¨ BMI</button>
    
    <!-- Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ -->
    <h3 id="result">Ù†ØªÙŠØ¬Ø© BMI Ø³ØªØ¸Ù‡Ø± Ù‡Ù†Ø§</h3>
    <h4 id="fat-result">Ù†Ø³Ø¨Ø© Ø§Ù„Ø¯Ù‡ÙˆÙ† ÙÙŠ Ø§Ù„Ø¬Ø³Ù…: Ø³ØªØ¸Ù‡Ø± Ù‡Ù†Ø§</h4>
    <p id="advice"></p>
    
    <!-- Ù‚Ø³Ù… Ù„Ø­ÙØ¸ Ø§Ù„ØªØ§Ø±ÙŠØ® -->
    <div id="history"></div>
    
    <!-- Ø±Ø³Ù… Ø¨ÙŠØ§Ù†ÙŠ Ù„Ø¹Ø±Ø¶ Ù…Ø¤Ø´Ø± BMI -->
    <canvas id="bmiChart" width="400" height="200"></canvas>
    
    <!-- Ø²Ø± Ù„Ù„Ù…Ø´Ø§Ø±ÙƒØ© -->
    <br>
    <button onclick="shareResult()">Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ù†ØªÙŠØ¬Ø©</button>
    
    <!-- Ø²Ø± Ù„ØªÙØ¹ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ -->
    <br>
    <button onclick="toggleDarkMode()">ğŸŒ™ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ</button>

    <!-- Ø³ÙƒØ±Ø¨Øª Ø¬Ø§ÙØ§Ø³ÙƒØ±Ø¨Øª -->
    <script>
        // ØªØ±Ø¬Ù…Ø© Ø§Ù„Ù†ØµÙˆØµ Ø¨ÙŠÙ† Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© ÙˆØ§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©
        const resources = {
            en: {
                translation: {
                    "title": "BMI Calculator",
                    "weight": "Weight",
                    "height": "Height",
                    "unit": "Unit",
                    "calculate": "Calculate BMI",
                    "result": "BMI Result",
                    "fatPercentage": "Body Fat Percentage",
                    "advice": "Health Advice"
                }
            },
            ar: {
                translation: {
                    "title": "Ø­Ø§Ø³Ø¨Ø© Ù…Ø¤Ø´Ø± ÙƒØªÙ„Ø© Ø§Ù„Ø¬Ø³Ù… (BMI)",
                    "weight": "Ø§Ù„ÙˆØ²Ù†",
                    "height": "Ø§Ù„Ø·ÙˆÙ„",
                    "unit": "ÙˆØ­Ø¯Ø§Øª Ø§Ù„Ù‚ÙŠØ§Ø³",
                    "calculate": "Ø­Ø³Ø§Ø¨ BMI",
                    "result": "Ù†ØªÙŠØ¬Ø© BMI",
                    "fatPercentage": "Ù†Ø³Ø¨Ø© Ø§Ù„Ø¯Ù‡ÙˆÙ† ÙÙŠ Ø§Ù„Ø¬Ø³Ù…",
                    "advice": "Ù†ØµØ§Ø¦Ø­ ØµØ­ÙŠØ©"
                }
            }
        };
        
        // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØªØ±Ø¬Ù…Ø© Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… i18next
        i18next.init({
            lng: "ar", // Ø§Ù„Ù„ØºØ© Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©
            resources: resources
        }, function(err, t) {
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù†ØµÙˆØµ Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
            document.getElementById('title').innerHTML = t('title');
            document.getElementById('weightLabel').innerHTML = t('weight');
            document.getElementById('heightLabel').innerHTML = t('height');
            document.getElementById('unitLabel').innerHTML = t('unit');
        });
        
        // Ø¯Ø§Ù„Ø© Ù„ØªØºÙŠÙŠØ± Ø§Ù„Ù„ØºØ© ÙŠØ¯ÙˆÙŠØ§Ù‹
        function changeLanguage(language) {
            i18next.changeLanguage(language, function(err, t) {
                document.getElementById('title').innerHTML = t('title');
                document.getElementById('weightLabel').innerHTML = t('weight');
                document.getElementById('heightLabel').innerHTML = t('height');
                document.getElementById('unitLabel').innerHTML = t('unit');
            });
        }
        
        // Ø¯Ø§Ù„Ø© Ù„Ø­Ø³Ø§Ø¨ BMI
        function calculateBMI() {
            let weight = parseFloat(document.getElementById('weight').value);
            let height = parseFloat(document.getElementById('height').value);
            let unit = document.getElementById('unit').value;
            let bmi;
            
            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
            if (isNaN(weight) || isNaN(height) || weight <= 0 || height <= 0) {
                alert('ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ù‚ÙŠÙ… ØµØ­ÙŠØ­Ø© Ù„Ù„ÙˆØ²Ù† ÙˆØ§Ù„Ø·ÙˆÙ„.');
                return;
            }
            
            // ØªØ­ÙˆÙŠÙ„ Ù…Ù† Ø¥Ù…Ø¨Ø±ÙŠØ§Ù„ÙŠ Ø¥Ù„Ù‰ Ù…ØªØ±ÙŠ
            if (unit === 'imperial') {
                height = height * 0.3048; // Ù‚Ø¯Ù… Ø¥Ù„Ù‰ Ù…ØªØ±
                weight = weight * 0.453592; // Ø±Ø·Ù„ Ø¥Ù„Ù‰ ÙƒÙŠÙ„ÙˆØ¬Ø±Ø§Ù…
            }
            
            // Ø­Ø³Ø§Ø¨ BMI
            bmi = weight / (height * height);
            
            // Ø­Ø³Ø§Ø¨ Ù†Ø³Ø¨Ø© Ø§Ù„Ø¯Ù‡ÙˆÙ†
            let fatPercentage = calculateBodyFatPercentage(bmi);
            
            // Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªÙŠØ¬Ø©
            displayResult(bmi, fatPercentage);
            drawChart(bmi);
            saveHistory(bmi, fatPercentage);
        }
        
        // Ø¯Ø§Ù„Ø© Ù„Ø­Ø³Ø§Ø¨ Ù†Ø³Ø¨Ø© Ø§Ù„Ø¯Ù‡ÙˆÙ† ÙÙŠ Ø§Ù„Ø¬Ø³Ù… (Ø§Ù„Ø¹Ù…Ø± Ø«Ø§Ø¨Øª ÙƒÙ…Ø«Ø§Ù„ = 25)
        function calculateBodyFatPercentage(bmi) {
            return (1.20 * bmi) + (0.23 * 25) - 16.2;
        }
        
        // Ø¹Ø±Ø¶ Ù†ØªØ§Ø¦Ø¬ BMI ÙˆØ§Ù„Ø¯Ù‡ÙˆÙ† ÙˆØ§Ù„Ù†ØµØ§Ø¦Ø­
        function displayResult(bmi, fatPercentage) {
            document.getElementById('result').textContent = 'Ù…Ø¤Ø´Ø± ÙƒØªÙ„Ø© Ø§Ù„Ø¬Ø³Ù… (BMI): ' + bmi.toFixed(2);
            document.getElementById('fat-result').textContent = 'Ù†Ø³Ø¨Ø© Ø§Ù„Ø¯Ù‡ÙˆÙ† ÙÙŠ Ø§Ù„Ø¬Ø³Ù…: ' + fatPercentage.toFixed(2) + '%';
            
            let advice = document.getElementById('advice');
            
            // Ù†ØµØ§Ø¦Ø­ Ø­Ø³Ø¨ Ø§Ù„ØªØµÙ†ÙŠÙ
            if (bmi < 18.5) {
                advice.textContent = 'Ù†Ù‚Øµ Ø§Ù„ÙˆØ²Ù† - Ø­Ø§ÙˆÙ„ Ø²ÙŠØ§Ø¯Ø© ØªÙ†Ø§ÙˆÙ„ Ø§Ù„Ø·Ø¹Ø§Ù… Ø§Ù„ØµØ­ÙŠ.';
            } else if (bmi >= 18.5 && bmi < 24.9) {
                advice.textContent = 'ÙˆØ²Ù† ØµØ­ÙŠ - Ø­Ø§ÙØ¸ Ø¹Ù„Ù‰ Ù†Ù…Ø· Ø­ÙŠØ§ØªÙƒ Ø§Ù„ØµØ­ÙŠ!';
            } else if (bmi >= 25 && bmi < 29.9) {
                advice.textContent = 'Ø²ÙŠØ§Ø¯Ø© Ø§Ù„ÙˆØ²Ù† - Ø­Ø§ÙˆÙ„ Ù…Ù…Ø§Ø±Ø³Ø© Ø§Ù„Ø±ÙŠØ§Ø¶Ø© ÙˆØ§ØªØ¨Ø§Ø¹ Ù†Ø¸Ø§Ù… ØºØ°Ø§Ø¦ÙŠ Ù…ØªÙˆØ§Ø²Ù†.';
            } else {
                advice.textContent = 'Ø³Ù…Ù†Ø© - Ù…Ù† Ø§Ù„Ø£ÙØ¶Ù„ Ø§Ø³ØªØ´Ø§Ø±Ø© Ø§Ù„Ø·Ø¨ÙŠØ¨ Ø£Ùˆ Ø£Ø®ØµØ§Ø¦ÙŠ Ø§Ù„ØªØºØ°ÙŠØ©.';
            }
        }
        
        // Ø±Ø³Ù… Ø§Ù„Ø±Ø³Ù… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Chart.js
        function drawChart(bmi) {
            var ctx = document.getElementById('bmiChart').getContext('2d');
            var bmiChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Ù†Ù‚Øµ Ø§Ù„ÙˆØ²Ù†', 'ÙˆØ²Ù† ØµØ­ÙŠ', 'Ø²ÙŠØ§Ø¯Ø© Ø§Ù„ÙˆØ²Ù†', 'Ø³Ù…Ù†Ø©'],
                    datasets: [{
                        label: 'Ù…Ø¤Ø´Ø± ÙƒØªÙ„Ø© Ø§Ù„Ø¬Ø³Ù…',
                        data: [18.5, 24.9, 29.9, 40],
                        backgroundColor: 'rgba(0, 123, 255, 0.6)',
                        borderColor: 'rgba(0, 123, 255, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
        }
        
        // Ø­ÙØ¸ Ø§Ù„ØªØ§Ø±ÙŠØ® ÙÙŠ Ø§Ù„ØµÙØ­Ø© (Ù„Ø§ ÙŠØªÙ… Ø­ÙØ¸Ù‡ ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª)
        function saveHistory(bmi, fatPercentage) {
            let historyDiv = document.getElementById('history');
            let historyItem = document.createElement('div');
            historyItem.textContent = `BMI: ${bmi.toFixed(2)} - Ù†Ø³Ø¨Ø© Ø§Ù„Ø¯Ù‡ÙˆÙ†: ${fatPercentage.toFixed(2)}%`;
            historyDiv.appendChild(historyItem);
        }
        
        // Ø¯Ø§Ù„Ø© Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ù†ØªØ§Ø¦Ø¬ (Ø­Ø§Ù„ÙŠØ§Ù‹ ØªÙ†Ø¨Ù‡ ÙÙ‚Ø·ØŒ ÙˆÙŠÙ…ÙƒÙ†Ùƒ Ø±Ø¨Ø·Ù‡Ø§ Ø¨Ù€ ØªÙˆÙŠØªØ± Ù…Ø«Ù„Ø§Ù‹)
        function shareResult() {
            const result = document.getElementById('result').innerText;
            const fatPercentage = document.getElementById('fat-result').innerText;
            const advice = document.getElementById('advice').innerText;
            
            const shareText = `${result}\n${fatPercentage}\n${advice}`;
            
            // Ù…Ø´Ø§Ø±ÙƒØ© (ØªÙ†Ø¨ÙŠÙ‡ ÙÙ‚Ø· Ø­Ø§Ù„ÙŠØ§Ù‹)
            alert(`Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ù†ØªÙŠØ¬Ø©: ${shareText}`);
        }

        // Ø¯Ø§Ù„Ø© Ù„ØªÙØ¹ÙŠÙ„ / ØªØ¹Ø·ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ
        function toggleDarkMode() {
            document.body.classList.toggle('dark-mode');
        }
    </script>
    
</body>

</html>